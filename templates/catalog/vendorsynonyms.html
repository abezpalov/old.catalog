{% extends "main.html" %}
{% block title %}Anodos: Синонимы производителей{% endblock %}
{% block content %}
{% if perms.catalog.change_product %}

<!-- Форма фильтра вывода -->
<div class="row collapse">
	<fieldset>
		<legend>Фильтр отображения</legend>
		<div class="small-4 columns">
			<label>Загрузчики
				<select id="filter-updater" class="do-filter-table">
					<option value="all"{% if updater_selected == 'all' %} selected{% endif %}> - Все загрузчики - </option>
					{% for updater in updaters %}
					<option value="{{ updater.id }}">{{ updater.name }}</option>
					{% endfor %}
				</select>
			</label>
		</div>
		<div class="small-4 columns">
			<label>Поставщики
				<select id="filter-distributor" class="do-filter-table">
					<option value="all"{% if distributor_selected == 'all' %} selected{% endif %}> - Все поставщики - </option>
					{% for distributor in distributors %}
					<option value="{{ distributor.id }}">{{ distributor.name }}</option>
					{% endfor %}
				</select>
			</label>
		</div>
		<div class="small-4 columns">
			<label>Производитель
				<select id="filter-vendor" class="do-filter-table">
					<option value="all"{% if vendor_selected == 'all' %} selected{% endif %}> - Все производители - </option>
					<option value="null"{% if vendor_selected == 'null' %} selected{% endif %}> - Не определён - </option>
					{% for vendor in vendors %}
					<option value="{{ vendor.id }}">{{ vendor.name }}</option>
					{% endfor %}
				</select>
			</label>
		</div>
	</fieldset>
</div>

<!-- Таблица со списком синонимов -->
<div class="row collapse">
	<table>
		<tr>
			<th>Наименование</th>
			<th class="hide-for-small-only">Загрузчик</th>
			<th class="hide-for-small-only">Поставщик</th>
			<th>Производитель</th>
			<th>Управление</th>
		</tr>
		{% for item in items %}
		<tr>
			<td><a href="/catalog/vendor-synonym/{{ item.id }}/" id="item-{{ item.id }}" data-do="edit-item" data-id="{{ item.id }}" data-vendor="{{ item.vendor.id }}">{{ item.name }}</a></td>
			<td class="hide-for-small-only">{{ item.updater }}</td>
			<td class="hide-for-small-only">{{ item.distributor }}</td>
			<td class="hide-for-small-only">{{ item.vendor.name }}</td>
			<td><button class="tiny" data-do="link-vendor-same-synonym" data-id="{{ item.id }}"><i class="fa fa-link"></i></button></td>
		</tr>
		{% endfor %}
	</table>
</div>

<!-- Модальное окно редактирования элемента -->
<div id="EditItemModal" class="reveal-modal large" data-reveal>
	<fieldset>
		<legend>Редактировать синоним производителя</legend>
		<input id="edit-item-id" type="hidden">
		<label>Наименование
			<input id="edit-item-name" type="text">
		</label>
		<select id="edit-item-vendor">
			<option value="null" selected> - Не определён - </option>
			{% for vendor in vendors %}
			<option value="{{ vendor.id }}">{{ vendor.name }}</option>
			{% endfor %}
		</select>
	</fieldset>
	<button data-do="edit-item-save">Сохранить</button>
	<button data-do="edit-item-cancel" class="secondary">Отменить</button>
</div>
{% else %}
<div class="row collapse">
	<div class="small-12 columns">
		<p class="panel">Недостаточно прав для данной функциональности.</p>
	</div>
</div>
{% endif %}
{% endblock %}
{% block js-content %}
{% if perms.catalog.change_product %}
<script>
{% include "catalog/js/vendorsynonyms.js" %}
</script>
{% endif %}
{% endblock %}
