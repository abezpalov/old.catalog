{% extends "main.html" %}
{% block title %}Anodos.Catalog: Vendor Keys{% endblock %}

{% block search %}
{% include "catalog/search-on-stocks.html" %}
{% endblock %}

{% block content %}

{% if perms.catalog.add_vendorkey or perms.catalog.change_vendorkey or perms.catalog.delete_vendorkey %}

<div class="row">
    <ul class="menu">
        <li><a href="/catalog/manage/vendors/">Производители</a></li>
        <li class="active"><a href="/catalog/manage/vendorkeys/">Написания производителей</a></li>
    </ul>
</div>

<hr/>

<div class="row">
    <div class="button-group">
        {% if perms.catalog.add_vendorkey %}
        <a class="button secondary" data-do="open-new-vendorkey">Добавить вариант написания</a>
        {% endif %}
        {% if perms.catalog.add_vendor %}
        <a class="button secondary" data-do="open-new-vendor">Добавить производителя</a>
        {% endif %}
    </div>
</div>

<div class="row">
    <table>
        <thead>
            <tr>
                <th width="1%">#</th>
                <th>Наименование</th>
                <th colspan="2">Производитель</th>
                <th class="hide-for-small-only">Загрузчик</th>
            </tr>
        </thead>
        <tbody>
            {% for vendorkey in vendorkeys %}
            <tr data-vendorkey = "{{ vendorkey.id }}">
                <td>{{ forloop.counter }}</td>
                <td>
                    <a
                        data-do = "open-edit-vendorkey"
                        data-vendorkey-id = "{{ vendorkey.id }}"
                        data-vendorkey-name = "{{ vendorkey.id }}">{{ vendorkey.name }}</a>
                </td>
                <td>
                    

                    <a
                        data-do="link-vendorkey-same-vendor"
                        data-vendorkey-id="{{vendorkey.id}}"><span class="secondary badge">>></span></a>
                </td>
                <td>
                    <a
                        data-do = "open-edit-vendor"
                        data-vendor-id = "{{ vendorkey.vendor.id }}"
                        data-vendor-name = "{{ vendorkey.vendor.id }}"
                        data-vendorkey-vendor-name = "{{ vendorkey.id }}">{{ vendorkey.vendor.name }}</a>
                </td>
                <td class = "hide-for-small-only">
                    <a
                        data-do = "open-edit-updater"
                        data-updater-id = "{{ vendorkey.updater.id }}"
                        data-updater-name = "{{ vendorkey.updater.id }}"
                        data-vendorkey-updater-name = "{{ vendorkey.id }}">{{ vendorkey.updater.name }}</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% else %}

<div class="row collapse">
    <div class="small-12 columns">
        <p class="panel">Недостаточно прав для данной функциональности.</p>
    </div>
</div>

{% endif %}

{% include "catalog/modal/vendorkey.html" %}
{% include "catalog/modal/updater.html" %}
{% include "catalog/modal/vendor.html" %}
{% endblock %}

{% block js-content %}
<script>
{% include "catalog/js/vendorkey.js" %}
{% include "catalog/js/updater.js" %}
{% include "catalog/js/vendor.js" %}
{% include "catalog/js/search-on-stocks.js" %}
</script>
{% endblock %}
